(function(){"use strict";self.addEventListener("message",function(l){const{locations:s,assets:a}=l.data,f=t=>{const r={};t.forEach(i=>{r[i.id]={id:i.id,label:i.name,children:[],icon:"./location.svg"}});const o=[];return t.forEach(i=>{if(i.parentId){const d=r[i.parentId];d&&d.children.push(r[i.id])}else o.push(r[i.id])}),o},p=(t,r)=>{const o={};r.forEach(n=>{let e="",c="";n.status&&(c=`./${n.status}.svg`),n.sensorType?(e="./component.png",n.sensorType==="energy"&&(c="./energy.svg")):(n.locationId&&!n.sensorId||n.parentId&&!n.sensorId)&&(e="./cube.svg"),o[n.id]={id:n.id,label:n.name,children:[],icon:e,componentIcon:c,sensor:n.sensorId,receiver:n.gatewayId,equipmentType:"Motor Elétrico (Trifásico)",responsible:n.status==="alert"?"Mecânica":"Elétrica"}}),r.forEach(n=>{if(n.parentId){const e=o[n.parentId];e&&e.children.push(o[n.id])}});const i=n=>{n.forEach(e=>{r.forEach(c=>{c.locationId===e.id&&e.children.push(o[c.id])}),e.children&&e.children.length>0&&i(e.children)})};i(t);const d=r.filter(n=>!n.locationId&&!n.parentId).map(n=>o[n.id]);return[...t,...d]},h=f(s),u=p(h,a);self.postMessage(u)},!1)})();
